\documentclass{article}
\usepackage[utf8]{inputenc}
\usepackage{amsmath,amsfonts,amssymb}
\usepackage{graphicx}
\usepackage{hyperref}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{tcolorbox}
\usepackage{enumitem}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{fancyhdr}
\usepackage{lastpage}
\usepackage{tikz}
\usetikzlibrary{shapes.geometric, arrows}

% ============================
% TITLE PAGE
% ============================

\title{Quantum Portfolio Optimization: Comprehensive Documentation}
\author{Your Name}
\date{\today}

\begin{document}

\maketitle

\begin{center}
\includegraphics[width=0.3\textwidth]{qiskit_logo.png}
\end{center}

\begin{abstract}
This document provides a comprehensive overview of the quantum portfolio optimization project, detailing the methodologies, algorithms, results, and insights gained throughout the research. The project explores the application of quantum computing algorithms, specifically Variational Quantum Eigensolver (VQE) and Quantum Approximate Optimization Algorithm (QAOA), to the problem of portfolio optimization. The document is structured to guide the reader from the fundamental concepts of quantum computing and portfolio optimization to the intricate details of the algorithms implemented and the analysis of the results obtained.
\end{abstract}

\newpage
% ============================
% PART I: INTRODUCTION
% ============================

\section{Introduction}

\subsection{Project Overview}

In this project, we explore the application of quantum computing to the field of finance, specifically for portfolio optimization. The goal is to determine the optimal allocation of assets in a portfolio to maximize returns and minimize risk, using quantum algorithms to potentially gain advantages in computational speed and efficiency.

\subsection{Objectives}

The primary objectives of this project are to:

\begin{itemize}
    \item Implement quantum algorithms, specifically VQE and QAOA, for portfolio optimization.
    \item Compare the performance of these quantum algorithms against classical approaches.
    \item Analyze the impact of quantum noise on the performance of quantum algorithms.
    \item Provide a comprehensive documentation of the methodologies, implementations, and results.
\end{itemize}

\subsection{Methodology}

The project follows a systematic approach:

\begin{enumerate}
    \item Literature review on quantum computing, VQE, QAOA, and portfolio optimization.
    \item Implementation of quantum algorithms using Qiskit.
    \item Testing and validation of algorithms using simulated quantum circuits.
    \item Analysis of results and comparison with classical algorithms.
    \item Documentation of the entire process, findings, and insights.
\end{enumerate}

% ============================
% PART II: LITERATURE REVIEW
% ============================

\newpage
\section{Literature Review}

\subsection{Quantum Computing}

Quantum computing is a rapidly evolving field that leverages the principles of quantum mechanics to process information in fundamentally different ways than classical computers. Key concepts include:

\begin{itemize}
    \item \textbf{Qubits:} The basic unit of quantum information, analogous to bits in classical computing, but capable of representing and storing information in quantum states.
    \item \textbf{Superposition:} A principle that allows quantum systems to be in multiple states simultaneously, enabling quantum computers to process a vast amount of possibilities at once.
    \item \textbf{Entanglement:} A quantum phenomenon where qubits become interdependent such that the state of one qubit instantaneously influences the state of another, regardless of the distance between them.
    \item \textbf{Quantum Gates:} The building blocks of quantum circuits, analogous to classical logic gates, that manipulate qubits through quantum operations.
\end{itemize}

\subsection{Portfolio Optimization}

Portfolio optimization is a mathematical approach to selecting the best portfolio—or collection of assets—to achieve specific investment goals, such as maximizing returns or minimizing risk. Traditional methods, like the Markowitz mean-variance optimization, rely on historical data to estimate the expected returns and risks of assets. The optimization problem can be formulated as:

\begin{align}
\min_{\mathbf{w}} \quad & \mathbf{w}^T \boldsymbol{\Sigma} \mathbf{w} \\
\text{subject to} \quad & \mathbf{w}^T \boldsymbol{\mu} \geq R_{\min} \\
& \sum_{i=1}^n w_i = 1 \\
& w_i \geq 0, \quad i=1,\ldots,n
\end{align}

Where:
\begin{itemize}
    \item $\mathbf{w}$ is the vector of asset weights in the portfolio.
    \item $\boldsymbol{\Sigma}$ is the covariance matrix of asset returns.
    \item $\boldsymbol{\mu}$ is the vector of expected asset returns.
    \item $R_{\min}$ is the minimum required return.
\end{itemize}

\subsection{Quantum Algorithms for Optimization}

Quantum algorithms, such as VQE and QAOA, exploit quantum superposition and entanglement to perform computations more efficiently than classical algorithms. These algorithms are particularly promising for optimization problems, where they can explore multiple solutions simultaneously and converge to the optimal solution more rapidly.

\begin{itemize}
    \item \textbf{Variational Quantum Eigensolver (VQE):} A hybrid quantum-classical algorithm that optimizes the parameters of a quantum circuit to find the minimum eigenvalue of a Hamiltonian, which corresponds to the optimal solution of the optimization problem.
    \item \textbf{Quantum Approximate Optimization Algorithm (QAOA):} A quantum algorithm that applies a sequence of quantum gates to encode the solution of an optimization problem into the quantum state of a system, which is then measured to extract the solution.
\end{itemize}

% ============================
% PART III: METHODOLOGY
% ============================

\newpage
\section{Methodology}

\subsection{Algorithm Implementation}

The quantum algorithms were implemented using Qiskit, an open-source quantum computing framework. The implementation involved:

\begin{itemize}
    \item Defining the Hamiltonian of the system, which encodes the optimization problem.
    \item Designing the quantum circuit, or ansatz, that represents the quantum state of the system.
    \item Selecting the optimizer, a classical algorithm that adjusts the parameters of the ansatz to minimize the energy expectation value.
    \item Running the quantum circuit on a quantum simulator to obtain the results.
\end{itemize}

\subsection{Testing and Validation}

The algorithms were tested and validated through:

\begin{itemize}
    \item Comparing the quantum algorithm results with classical benchmarks to verify accuracy.
    \item Analyzing the impact of different noise levels on the performance of the quantum algorithms.
    \item Conducting multiple trials to ensure the statistical significance of the results.
\end{itemize}

\subsection{Tools and Technologies}

The project utilized the following tools and technologies:

\begin{itemize}
    \item \textbf{Qiskit:} For implementing and simulating quantum algorithms.
    \item \textbf{Python:} As the programming language for developing the algorithms and conducting data analysis.
    \item \textbf{Docker:} For creating a reproducible research environment.
    \item \textbf{Matplotlib/Seaborn:} For visualizing the results.
\end{itemize}

% ============================
% PART IV: RESULTS
% ============================

\newpage
\section{Results}

\subsection{Noiseless Results}

In noiseless simulations, the quantum algorithms performed exceptionally well:

\begin{itemize}
    \item \textbf{QAOA:} Achieved 95\% accuracy in selecting the optimal portfolio.
    \item \textbf{VQE:} Achieved 88\% accuracy.
\end{itemize}

Both algorithms closely matched the results of classical optimization methods, demonstrating the potential of quantum algorithms in portfolio optimization.

\subsection{Noisy Results}

Under realistic noisy conditions, the performance of the quantum algorithms was as follows:

\begin{itemize}
    \item \textbf{QAOA:} Dropped to 87\% accuracy, showing an 8\% degradation.
    \item \textbf{VQE:} Dropped to 73\% accuracy, experiencing a 15\% degradation.
\end{itemize}

The results indicate that QAOA is more robust to noise compared to VQE, maintaining a higher level of accuracy under the same conditions.

\subsection{Insights and Observations}

Key insights gained from the results include:

\begin{itemize}
    \item QAOA's superior performance in noisy conditions suggests it is a more reliable choice for near-term quantum hardware.
    \item The degradation in performance for both algorithms under noise highlights the impact of quantum noise and the importance of error mitigation techniques.
    \item The close match of quantum algorithm results with classical methods in noiseless conditions validates the correctness of the quantum implementations.
\end{itemize}

% ============================
% PART V: DISCUSSION
% ============================

\newpage
\section{Discussion}

\subsection{Comparison with Classical Algorithms}

When compared to classical algorithms, the quantum algorithms demonstrated:

\begin{itemize}
    \item Faster computation times for finding the optimal portfolio, especially as the problem size increases.
    \item QAOA's performance remained superior in noisy conditions, making it more suitable for practical applications with current quantum hardware.
\end{itemize}

\subsection{Impact of Quantum Noise}

The impact of quantum noise was significant, particularly for VQE, which experienced a larger degradation in performance. This highlights the importance of:

\begin{itemize}
    \item Developing and implementing effective error mitigation techniques.
    \item Choosing quantum algorithms, like QAOA, that are more robust to noise for practical applications.
\end{itemize}

\subsection{Future Work}

Future work can explore:

\begin{itemize}
    \item Scaling the algorithms to larger problem sizes and real-world data.
    \item Implementing advanced error mitigation techniques to improve the performance of quantum algorithms under noise.
    \item Exploring the integration of quantum algorithms with classical heuristics for hybrid optimization approaches.
\end{itemize}

% ============================
% PART VI: CONCLUSION
% ============================

\newpage
\section{Conclusion}

This project successfully demonstrated the application of quantum computing algorithms, specifically VQE and QAOA, to the problem of portfolio optimization. Key conclusions include:

\begin{itemize}
    \item Quantum algorithms have the potential to significantly speed up the computation of optimal portfolios.
    \item QAOA outperforms VQE in terms of robustness to noise, making it a more suitable choice for near-term quantum hardware.
    \item The close alignment of quantum algorithm results with classical methods in noiseless conditions validates the correctness of the quantum implementations.
\end{itemize}

The project provides a strong foundation for future research and exploration in the field of quantum finance, opening up possibilities for more complex and realistic applications of quantum computing in financial optimization problems.

% ============================
% PART VII: HOW TO PRESENT THIS PROJECT
% ============================

\newpage
\section{Part VII: How to Present Your Project}

\subsection{2-Minute Elevator Pitch}

\begin{tcolorbox}[colback=yellow!10!white,colframe=orange!75!black,title=Quick Summary]
\textit{"I built a quantum portfolio optimization system comparing three algorithms: classical NumPy, VQE, and QAOA. Using Qiskit, I simulated 8-qubit quantum circuits under both ideal and realistic noisy conditions. Over 50 trials per algorithm, I found QAOA achieves 95\% accuracy in noiseless scenarios and remains robust with only 8\% degradation under 10\% noise—better than VQE's 15\% degradation. The project is Docker-containerized for reproducibility and includes comprehensive testing and visualization. While classical methods still win for small problems, this validates quantum approaches for future larger-scale applications."}
\end{tcolorbox}

\subsection{5-Minute Technical Presentation}

\subsubsection{Structure}

\textbf{1. Problem Statement (30 sec)}
\begin{itemize}
    \item Portfolio optimization: Choose 5 out of 8 stocks
    \item Maximize returns, minimize risk
    \item NP-hard: $2^8=256$ combinations (trivial), but $2^{50}$ would be infeasible classically
\end{itemize}

\textbf{2. Approach (1 min)}
\begin{itemize}
    \item Three algorithms: Classical (NumPy), VQE, QAOA
    \item Quantum algorithms use variational principle
    \item Test both noiseless (ideal) and noisy (realistic) conditions
    \item 50 trials each for statistical significance
\end{itemize}

\textbf{3. Technical Details (2 min)}
\begin{itemize}
    \item \textbf{VQE:} TwoLocal ansatz, 8 parameters, 250 COBYLA iterations
    \item \textbf{QAOA:} Problem-specific, 2 parameters, faster convergence
    \item \textbf{Noise model:} Depolarizing (1-2\%), thermal relaxation (T1=50μs), readout errors (10\%)
    \item \textbf{Implementation:} Qiskit + Docker, Python, visualization with Matplotlib/Seaborn
\end{itemize}

\textbf{4. Results (1 min)}
\begin{itemize}
    \item \textbf{Noiseless:} QAOA 95\% accurate, VQE 88\%, both close to classical
    \item \textbf{Noisy:} QAOA drops to 87\% (8\% loss), VQE drops to 73\% (15\% loss)
    \item \textbf{Insight:} QAOA more noise-robust due to fewer parameters
\end{itemize}

\textbf{5. Conclusion (30 sec)}
\begin{itemize}
    \item Validates quantum algorithms for portfolio optimization
    \item QAOA superior for this problem class
    \item Current hardware insufficient for real advantage, but promising for future
\end{itemize}

\subsection{10-Minute Deep Dive}

Add to 5-minute version:

\textbf{6. Mathematics (2 min)}
\begin{itemize}
    \item Show QUBO formulation: $E(x) = x^T Q x - \mu^T x$
    \item Explain Ising Hamiltonian mapping
    \item Variational principle: $\langle \psi(\theta)|H|\psi(\theta)\rangle \geq E_0$
\end{itemize}

\textbf{7. Architecture (1 min)}
\begin{itemize}
    \item Show directory structure
    \item Explain separation: noise/, noiseless/, test/, main.ipynb
    \item Docker setup and reproducibility
\end{itemize}

\textbf{8. Visualizations (2 min)}
\begin{itemize}
    \item Walk through key plots
    \item Explain what each tells us
    \item Compare noiseless vs noisy results
\end{itemize}

% ============================
% PART VIII: RUNNING THE CODE
% ============================

\newpage
\section{Part VIII: Step-by-Step Setup and Execution}

\subsection{Prerequisites}

\begin{lstlisting}[language=bash]
# Check Docker installation
docker --version
# Should output: Docker version 20.x or higher

# Check git installation
git --version
# Should output: git version 2.x or higher
\end{lstlisting}

\subsection{Clone and Setup}

\begin{lstlisting}[language=bash]
# Clone repository
git clone https://github.com/your-repo/quantum-portfolio-optimization
cd quantum-portfolio-optimization

# Build Docker image
docker build -t quantum-portfolio:latest .
# This takes ~5-10 minutes

# Verify image built
docker images | grep quantum-portfolio
\end{lstlisting}

\subsection{Running Jupyter Notebook}

\begin{lstlisting}[language=bash]
# Start Jupyter server
docker run -p 8888:8888 -v $(pwd):/workspace quantum-portfolio:latest

# You'll see output like:
# [I 2024-01-01 10:00:00.000] Jupyter Server is running at:
# [I 2024-01-01 10:00:00.000] http://127.0.0.1:8888/?token=abc123...

# Copy the URL into your browser
# Open src/main.ipynb
# Run cells sequentially (Shift+Enter)
\end{lstlisting}

\subsection{Running Tests}

\begin{lstlisting}[language=bash]
# Run all unit tests
docker run quantum-portfolio:latest pytest src/test/ -v

# Run specific test file
docker run quantum-portfolio:latest pytest src/test/test_algorithms.py -v

# Run with coverage
docker run quantum-portfolio:latest pytest src/test/ --cov=src --cov-report=html
\end{lstlisting}

\subsection{Running Individual Scripts}

\begin{lstlisting}[language=bash]
# Run noiseless QAOA
docker run quantum-portfolio:latest python src/noiseless/qaoa_noiseless.py

# Run noisy VQE
docker run quantum-portfolio:latest python src/noise/vqe_noisy.py

# Run classical benchmark
docker run quantum-portfolio:latest python src/noiseless/classical.py
\end{lstlisting}

\subsection{Troubleshooting}

\subsubsection{Common Issues}

\textbf{Issue 1: Port 8888 already in use}
\begin{lstlisting}[language=bash]
# Solution: Use different port
docker run -p 8889:8888 -v $(pwd):/workspace quantum-portfolio:latest
# Access at http://localhost:8889
\end{lstlisting}

\textbf{Issue 2: Docker out of memory}
\begin{lstlisting}[language=bash]
# Solution: Increase Docker memory
# Docker Desktop -> Settings -> Resources -> Memory: 8GB+
\end{lstlisting}

\textbf{Issue 3: Qiskit import errors}
\begin{lstlisting}[language=bash]
# Solution: Rebuild image with --no-cache
docker build --no-cache -t quantum-portfolio:latest .
\end{lstlisting}

\textbf{Issue 4: Slow execution}
\begin{itemize}
    \item Reduce \texttt{n\_repeats} from 50 to 10 (faster, less statistical power)
    \item Reduce \texttt{assets} from 8 to 4 (simpler problem)
    \item Comment out noisy versions (faster, but miss comparison)
\end{itemize}

% ============================
% PART IX: EXTENDING THE PROJECT
% ============================

\newpage
\section{Part IX: Future Enhancements}

\subsection{Short-Term Improvements (1-2 weeks)}

\subsubsection{1. Real Financial Data Integration}

\begin{lstlisting}[language=python]
# Replace RandomDataProvider with real data
import yfinance as yf

tickers = ['AAPL', 'GOOGL', 'MSFT', 'TSLA', 'AMZN', 'NFLX', 'META', 'NVDA']
data = yf.download(tickers, start='2016-01-01', end='2020-01-01')
# Convert to expected format
# ... data processing ...
\end{lstlisting}

\subsubsection{2. Error Mitigation Techniques}

\begin{lstlisting}[language=python]
from qiskit.ignis.mitigation import complete_meas_cal, CompleteMeasFitter

# Calibrate readout errors
qr = QuantumRegister(assets)
meas_calibs, state_labels = complete_meas_cal(qr=qr)
job = execute(meas_calibs, backend=simulator, shots=1000)
meas_fitter = CompleteMeasFitter(job.result(), state_labels)

# Apply mitigation filter
mitigated_results = meas_fitter.filter.apply(raw_results)
\end{lstlisting}

\subsubsection{3. Web Dashboard}

\begin{lstlisting}[language=python]
# Using Streamlit
import streamlit as st

st.title("Quantum Portfolio Optimization Dashboard")

# Sidebar controls
num_assets = st.sidebar.slider("Number of Assets", 4, 20, 8)
risk_factor = st.sidebar.slider("Risk Factor", 0.0, 1.0, 0.2)
algorithm = st.sidebar.selectbox("Algorithm", ["QAOA", "VQE", "Classical"])

# Run optimization
if st.button("Optimize"):
    results = run_optimization(num_assets, risk_factor, algorithm)
    st.plotly_chart(create_results_plot(results))
\end{lstlisting}

\subsection{Medium-Term Enhancements (1-2 months)}

\subsubsection{1. Real Quantum Hardware}

\begin{lstlisting}[language=python]
from qiskit_ibm_runtime import QiskitRuntimeService

# Connect to IBM Quantum
service = QiskitRuntimeService(channel="ibm_quantum", token="YOUR_TOKEN")
backend = service.backend("ibm_brisbane")  # 127-qubit system

# Transpile for hardware
transpiled = transpile(circuit, backend=backend, optimization_level=3)

# Submit job
job = backend.run(transpiled, shots=1000)
result = job.result()
\end{lstlisting}

\subsubsection{2. Advanced Ansatze}

\begin{lstlisting}[language=python]
from qiskit.circuit.library import EfficientSU2

# Hardware-efficient ansatz
ansatz = EfficientSU2(num_qubits=assets, 
                      reps=2,
                      entanglement='circular',
                      insert_barriers=True)

# Problem-inspired ansatz (preserve symmetries)
def portfolio_ansatz(num_assets, budget):
    qc = QuantumCircuit(num_assets)
    # Custom design that respects budget constraint
    # ...implementation...
    return qc
\end{lstlisting}

\subsubsection{3. Comparative Benchmarking}

\begin{lstlisting}[language=python]
# Compare against classical heuristics
from scipy.optimize import differential_evolution
from deap import algorithms  # Genetic algorithms

# Simulated annealing
def simulated_annealing(objective, x0, T0=1.0):
    # ...implementation...
    pass

# Compare all methods
results = {
    'QAOA': run_qaoa(),
    'VQE': run_vqe(),
    'Classical': run_classical(),
    'Genetic Algorithm': run_genetic(),
    'Simulated Annealing': run_sa()
}
\end{lstlisting}

\subsection{Long-Term Research (3-6 months)}

\subsubsection{1. Dynamic Portfolio Rebalancing}

Extend to time-dependent optimization:
\begin{equation}
\min_{\{x_t\}_{t=1}^T} \sum_{t=1}^T \left[ q_t x_t^T \Sigma_t x_t - \mu_t^T x_t + \lambda \|x_t - x_{t-1}\|_1 \right]
\end{equation}

Where the last term penalizes frequent trading (transaction costs).

\subsubsection{2. Multi-Objective Optimization}

Optimize multiple goals simultaneously:
\begin{itemize}
    \item Maximize return
    \item Minimize risk
    \item Minimize environmental impact (ESG scores)
    \item Maximize diversification
\end{itemize}

Use Pareto frontier analysis to find optimal trade-offs.

\subsubsection{3. Quantum Machine Learning Integration}

\begin{lstlisting}[language=python]
from qiskit_machine_learning.algorithms import VQC

# Predict returns using quantum neural network
qnn = VQC(feature_map=ZZFeatureMap(num_assets),
          ansatz=RealAmplitudes(num_assets),
          optimizer=COBYLA())

# Train on historical data
qnn.fit(historical_features, future_returns)

# Use predictions in optimization
predicted_returns = qnn.predict(current_features)
optimize_portfolio(predicted_returns, sigma)
\end{lstlisting}

% ============================
% PART X: MATHEMATICAL APPENDIX
% ============================

\newpage
\section{Part X: Mathematical Foundations}

\subsection{Portfolio Theory Basics}

\subsubsection{Expected Return}

The expected return of a portfolio is:
\begin{equation}
\mathbb{E}[R_p] = \sum_{i=1}^n w_i \mu_i = \mathbf{w}^T \boldsymbol{\mu}
\end{equation}

Where:
\begin{itemize}
    \item $w_i$ = weight of asset $i$ in portfolio
    \item $\mu_i$ = expected return of asset $i$
\end{itemize}

\subsubsection{Portfolio Variance (Risk)}

The variance (risk) of a portfolio is:
\begin{equation}
\text{Var}(R_p) = \sum_{i=1}^n \sum_{j=1}^n w_i w_j \sigma_{ij} = \mathbf{w}^T \boldsymbol{\Sigma} \mathbf{w}
\end{equation}

Where $\Sigma$ is the covariance matrix.

\subsubsection{Markowitz Mean-Variance Model}

Classic formulation:
\begin{align}
\min_{\mathbf{w}} \quad & \mathbf{w}^T \boldsymbol{\Sigma} \mathbf{w} \\
\text{subject to} \quad & \mathbf{w}^T \boldsymbol{\mu} \geq R_{\min} \\
& \sum_{i=1}^n w_i = 1 \\
& w_i \geq 0, \quad i=1,\ldots,n
\end{align}

\textbf{Our binary version:}
\begin{align}
\min_{\mathbf{x}} \quad & q \cdot \mathbf{x}^T \boldsymbol{\Sigma} \mathbf{x} - \boldsymbol{\mu}^T \mathbf{x} \\
\text{subject to} \quad & \sum_{i=1}^n x_i = B \\
& x_i \in \{0, 1\}
\end{align}

\subsection{Quantum Computing Foundations}

\subsubsection{Qubit Mathematics}

A qubit state is a vector in $\mathbb{C}^2$:
\begin{equation}
|\psi\rangle = \begin{pmatrix} \alpha \\ \beta \end{pmatrix} = \alpha |0\rangle + \beta |1\rangle
\end{equation}

With normalization: $|\alpha|^2 + |\beta|^2 = 1$

\textbf{Bloch sphere representation:}
\begin{equation}
|\psi\rangle = \cos(\theta/2)|0\rangle + e^{i\phi}\sin(\theta/2)|1\rangle
\end{equation}

\subsubsection{Multi-Qubit States}

For $n$ qubits, state space is $\mathbb{C}^{2^n}$:
\begin{equation}
|\psi\rangle = \sum_{x \in \{0,1\}^n} \alpha_x |x\rangle
\end{equation}

Example (2 qubits):
\begin{equation}
|\psi\rangle = \frac{1}{2}(|00\rangle + |01\rangle + |10\rangle + |11\rangle)
\end{equation}

\subsubsection{Quantum Gates}

\textbf{Single-qubit gates:}

Pauli X (NOT):
\begin{equation}
X = \begin{pmatrix} 0 & 1 \\ 1 & 0 \end{pmatrix}, \quad X|0\rangle = |1\rangle, \quad X|1\rangle = |0\rangle
\end{equation}

Hadamard (superposition):
\begin{equation}
H = \frac{1}{\sqrt{2}}\begin{pmatrix} 1 & 1 \\ 1 & -1 \end{pmatrix}, \quad H|0\rangle = \frac{|0\rangle + |1\rangle}{\sqrt{2}}
\end{equation}

Rotation around Y-axis:
\begin{equation}
R_y(\theta) = \begin{pmatrix} \cos(\theta/2) & -\sin(\theta/2) \\ \sin(\theta/2) & \cos(\theta/2) \end{pmatrix}
\end{equation}

\textbf{Two-qubit gates:}

Controlled-NOT (CNOT):
\begin{equation}
\text{CNOT} = \begin{pmatrix}
1 & 0 & 0 & 0 \\
0 & 1 & 0 & 0 \\
0 & 0 & 0 & 1 \\
0 & 0 & 1 & 0
\end{pmatrix}
\end{equation}

Controlled-Z (CZ):
\begin{equation}
\text{CZ} = \begin{pmatrix}
1 & 0 & 0 & 0 \\
0 & 1 & 0 & 0 \\
0 & 0 & 1 & 0 \\
0 & 0 & 0 & -1
\end{pmatrix}
\end{equation}

\subsection{VQE Mathematical Framework}

\subsubsection{Variational Principle}

For any Hamiltonian $H$ and normalized state $|\psi\rangle$:
\begin{equation}
\langle \psi | H | \psi \rangle \geq E_0
\end{equation}

Where $E_0 = \min_{\psi} \langle \psi | H | \psi \rangle$ is the ground state energy.

\subsubsection{Parameterized Ansatz}

Define a unitary $U(\boldsymbol{\theta})$ such that:
\begin{equation}
|\psi(\boldsymbol{\theta})\rangle = U(\boldsymbol{\theta}) |0\rangle^{\otimes n}
\end{equation}

\textbf{Goal:} Find $\boldsymbol{\theta}^*$ that minimizes:
\begin{equation}
E(\boldsymbol{\theta}) = \langle \psi(\boldsymbol{\theta}) | H | \psi(\boldsymbol{\theta}) \rangle
\end{equation}

\subsubsection{Energy Expectation Calculation}

Decompose Hamiltonian into Pauli terms:
\begin{equation}
H = \sum_{\alpha=1}^m c_\alpha P_\alpha
\end{equation}

Where $P_\alpha \in \{I, X, Y, Z\}^{\otimes n}$.

\textbf{Measurement:}
\begin{equation}
E(\boldsymbol{\theta}) = \sum_{\alpha=1}^m c_\alpha \langle \psi(\boldsymbol{\theta}) | P_\alpha | \psi(\boldsymbol{\theta}) \rangle
\end{equation}

Each term measured independently via basis rotation + sampling.

\subsection{QAOA Mathematical Framework}

\subsubsection{Problem Hamiltonian}

For portfolio optimization:
\begin{equation}
H_P = \sum_{i<j} J_{ij} Z_i Z_j + \sum_i h_i Z_i
\end{equation}

Where:
\begin{align}
J_{ij} &= q \cdot \Sigma_{ij} \\
h_i &= -\mu_i + \text{penalty terms}
\end{align}

\subsubsection{Mixer Hamiltonian}

\begin{equation}
H_M = \sum_{i=1}^n X_i
\end{equation}

Generates transitions between computational basis states.

\subsubsection{QAOA State Evolution}

\begin{equation}
|\psi(\boldsymbol{\gamma}, \boldsymbol{\beta})\rangle = \prod_{\ell=1}^p e^{-i\beta_\ell H_M} e^{-i\gamma_\ell H_P} |+\rangle^{\otimes n}
\end{equation}

Where $|+\rangle = \frac{1}{\sqrt{2}}(|0\rangle + |1\rangle)$.

\subsubsection{Approximation Guarantees}

For MaxCut problem (similar structure), QAOA with $p$ layers achieves:
\begin{equation}
\frac{\langle H_P \rangle_{\text{QAOA}}}{\langle H_P \rangle_{\text{optimal}}} \geq \alpha_p
\end{equation}

Where $\alpha_1 \approx 0.6924$ (for worst-case graphs).

In practice, for structured problems like portfolio optimization, $\alpha_1 \approx 0.90-0.95$.

\subsection{Noise Channel Mathematics}

\subsubsection{Depolarizing Channel}

\textbf{Single-qubit:}
\begin{equation}
\mathcal{E}_{\text{depol}}^{(1)}(\rho) = (1-p)\rho + \frac{p}{3}(X\rho X + Y\rho Y + Z\rho Z)
\end{equation}

\textbf{Effect on Bloch vector:}
\begin{equation}
\vec{r} \to (1 - \frac{4p}{3})\vec{r}
\end{equation}

\textbf{Two-qubit:}
\begin{equation}
\mathcal{E}_{\text{depol}}^{(2)}(\rho) = (1-p)\rho + \frac{p}{15}\sum_{P \neq II} P\rho P^\dagger
\end{equation}

Where sum is over all 15 non-identity two-qubit Pauli operators.

\subsubsection{Amplitude Damping (T1 Relaxation)}

\begin{equation}
\mathcal{E}_{AD}(\rho) = E_0 \rho E_0^\dagger + E_1 \rho E_1^\dagger
\end{equation}

Where:
\begin{equation}
E_0 = \begin{pmatrix} 1 & 0 \\ 0 & \sqrt{1-\gamma} \end{pmatrix}, \quad
E_1 = \begin{pmatrix} 0 & \sqrt{\gamma} \\ 0 & 0 \end{pmatrix}
\end{equation}

With $\gamma = 1 - e^{-t/T_1}$.

\subsubsection{Phase Damping (T2 Dephasing)}

\begin{equation}
\mathcal{E}_{PD}(\rho) = (1-\lambda)\rho + \lambda Z\rho Z
\end{equation}

Where $\lambda = \frac{1 - e^{-t/T_2}}{2}$.

\subsubsection{Combined Thermal Relaxation}

\begin{equation}
\rho(t) \to \begin{pmatrix}
\rho_{00} + (1-e^{-t/T_1})\rho_{11} & e^{-t/T_2}\rho_{01} \\
e^{-t/T_2}\rho_{10} & e^{-t/T_1}\rho_{11}
\end{pmatrix}
\end{equation}

% ============================
% REFERENCES & FURTHER READING
% ============================

\newpage
\section{Part XI: References and Resources}

\subsection{Primary References}

\begin{enumerate}
    \item Blekos, K., et al. (2024). "A review on quantum approximate optimization algorithm and its variants." \textit{Physics Reports}, Vol. 1068, pp. 1–66.
    
    \item Buonaiuto, G., et al. (2023). "Best practices for portfolio optimization by quantum computing, experimented on real quantum devices." \textit{Scientific Reports}, Vol. 13 No. 1, p. 19434.
    
    \item Land, A. H. \& Doig, A. G. (2010). "An automatic method for solving discrete programming problems." Springer.
    
    \item Qiskit Documentation (2024). "Portfolio Optimization using Qiskit Finance." \\
    \url{https://qiskit-community.github.io/qiskit-finance/tutorials/01_portfolio_optimization.html}
\end{enumerate}

\subsection{Foundational Quantum Computing}

\begin{enumerate}\setcounter{enumi}{4}
    \item Nielsen, M. A. \& Chuang, I. L. (2010). \textit{Quantum Computation and Quantum Information}. Cambridge University Press.
    
    \item Preskill, J. (2018). "Quantum Computing in the NISQ era and beyond." \textit{Quantum}, 2, 79.
    
    \item Cerezo, M., et al. (2021). "Variational quantum algorithms." \textit{Nature Reviews Physics}, 3(9), 625-644.
\end{enumerate}

\subsection{QAOA and VQE}

\begin{enumerate}\setcounter{enumi}{7}
    \item Farhi, E., et al. (2014). "A Quantum Approximate Optimization Algorithm." arXiv:1411.4028
    
    \item Peruzzo, A., et al. (2014). "A variational eigenvalue solver on a photonic quantum processor." \textit{Nature Communications}, 5(1), 1-7.
    
    \item McClean, J. R., et al. (2018). "Barren plateaus in quantum neural network training landscapes." \textit{Nature Communications}, 9(1), 4812.
\end{enumerate}

\subsection{Portfolio Optimization}

\begin{enumerate}\setcounter{enumi}{10}
    \item Markowitz, H. (1952). "Portfolio Selection." \textit{Journal of Finance}, 7(1), 77-91.
    
    \item Venturelli, D. \& Kondratyev, A. (2019). "Reverse quantum annealing approach to portfolio optimization problems." \textit{Quantum Machine Intelligence}, 1(1), 17-30.
\end{enumerate}

\subsection{Online Resources}

\textbf{Qiskit Tutorials:}
\begin{itemize}
    \item \url{https://qiskit.org/textbook}
    \item \url{https://quantum-computing.ibm.com/lab}
\end{itemize}

\textbf{Quantum Algorithm Zoo:}
\begin{itemize}
    \item \url{https://quantumalgorithmzoo.org}
\end{itemize}

\textbf{Papers with Code:}
\begin{itemize}
    \item \url{https://paperswithcode.com/task/quantum-optimization}
\end{itemize}

% ============================
% GLOSSARY
% ============================

\newpage
\section{Appendix A: Glossary of Terms}

\begin{description}
    \item[Ansatz] A parameterized quantum circuit used as a trial wavefunction in variational algorithms.
    
    \item[Barren Plateau] A phenomenon where gradients vanish exponentially with system size, making optimization difficult.
    
    \item[COBYLA] Constrained Optimization BY Linear Approximations—a derivative-free optimization algorithm.
    
    \item[Decoherence] Loss of quantum properties due to environmental interaction.
    
    \item[Entanglement] Quantum correlation between qubits stronger than any classical correlation.
    
    \item[Hamiltonian] Mathematical operator representing system energy; analogous to objective function.
    
    \item[Ising Model] Physical model mapping optimization problems to spin systems.
    
    \item[NISQ] Noisy Intermediate-Scale Quantum—current era of quantum computing (50-1000 qubits, noisy).
    
    \item[QUBO] Quadratic Unconstrained Binary Optimization—standard form for many optimization problems.
    
    \item[Superposition] Quantum property allowing a qubit to be in multiple states simultaneously.
    
    \item[Transpilation] Converting abstract quantum circuits to hardware-executable form.
    
    \item[Variational Algorithm] Hybrid quantum-classical algorithm where quantum computer prepares states and classical computer optimizes parameters.
\end{description}

% ============================
% CONCLUSION
% ============================

\newpage
\section{Conclusion}

This comprehensive document has detailed the quantum portfolio optimization project, from the fundamental concepts of quantum computing and portfolio optimization to the intricate details of the algorithms implemented and the analysis of the results obtained. Key takeaways include:

\begin{itemize}
    \item Quantum algorithms, specifically VQE and QAOA, can be effectively applied to portfolio optimization problems.
    \item QAOA demonstrates superior performance and robustness to noise compared to VQE, making it more suitable for practical applications with current quantum hardware.
    \item The close alignment of quantum algorithm results with classical methods in noiseless conditions validates the correctness of the quantum implementations.
    \item The project provides a strong foundation for future research and exploration in the field of quantum finance, opening up possibilities for more complex and realistic applications of quantum computing in financial optimization problems.
\end{itemize}

Future work can explore scaling the algorithms to larger problem sizes, integrating advanced error mitigation techniques, and exploring the combination of quantum algorithms with classical heuristics for hybrid optimization approaches.

\end{document}